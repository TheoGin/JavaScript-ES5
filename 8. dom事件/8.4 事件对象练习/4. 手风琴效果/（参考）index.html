<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <style>
      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .wrap {
        width: 200px;
        text-align: center;
        line-height: 2;
        border: 1px solid #ccc;
      }
      .menu > li .title {
        display: block;
        background-color: #ec8734;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <div class="wrap" id="wrap">
      <ul class="menu"></ul>
    </div>

    <script>
      var menu = [
        {
          name: "菜单一",
          children: ["商品一", "商品二", "商品三", "商品四"],
        },
        {
          name: "菜单二",
          children: ["商品一", "商品二", "商品三", "商品四"],
        },
        {
          name: "菜单三",
          children: ["商品一", "商品二", "商品三", "商品四"],
        },
        {
          name: "菜单四",
          children: ["商品一", "商品二", "商品三", "商品四"],
        },
      ];
      var ulMenu = document.querySelector(".menu");
      menu.forEach(function (item) {
        var li = document.createElement("li");
        li.innerHTML = `<span class="title"> ${item.name} </span>`;

        var ulSubMenu = document.createElement("ul");

        item.children.forEach(function (child) {
          ulSubMenu.innerHTML += `<li> ${child} </li>`;
        });

        li.appendChild(ulSubMenu);
        ulMenu.appendChild(li);
      });
      ulMenu.onclick = function (e) {
        if (e.target.className === "title") {
          var ulSubMenu = e.target.nextElementSibling;
          // 要拿到最终样式，因为一开始样式表啥都没有，不然点击会出问题
          var style = getComputedStyle(ulSubMenu);
          // if(ulSubMenu.style.display === 'block') { // 错误写法
          if (style.display === "block") {
            ulSubMenu.style.display = "none";
          } else {
            ulSubMenu.style.display = "block";
          }
        }
      };
    </script>
  </body>
</html>
