<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
  </head>
  <body>

    <script src="../../plugin/helper.js"></script>
    <script>
      // 函数管道：将多个单参函数组合起来，形成一个新的函数，这些函数中，前一个函数的输出，是后一个函数的输入

      /**
       * 将 字符串 中每一个单词首字母大写
       * @param str 字符串
       * @returns {*}
       */
      function everyFirstLetterUpper(str) {
        // \w  匹配任意单词字符(字母、数字、下划线)，等价于 [a-zA-Z0-9_]
        // *  匹配前面的子表达式零次或多次
        return str.replace(/\b(\w)(\w*)\b/g, function ($word, $1FistLetter, $2LeftLetter) {
          return $1FistLetter.toUpperCase() + $2LeftLetter;
          // console.log($word, $1FistLetter, $2LeftLetter);
          /*
           MY M Y
           fIrST f IrST
           naME n aME
           *  */
        });
      }
      // console.log(everyFirstLetterUpper(str)); //     MY     FIrST    NaME

      function firstLetterLower(str) {
        return str.replace(/\w/, function ($FistLetter) {
          // 没有匹配到的保持不变
          return $FistLetter.toLowerCase();
        });
      }
      // console.log(firstLetterLower(str)); //     mY     fIrST    naME

      /**
       * 将字符串中除首字母外的其他字母小写
       * @param str
       * @returns {*}
       */
      function otherLetterLowerExceptFirstLetter(str) {
        return str.replace(/\b(\w)(\w*)\b/g, function ($word, $1FistLetter, $2LeftLetter) {
          return $1FistLetter + $2LeftLetter.toLowerCase();
        });
      }
      // console.log(otherLetterLowerExceptFirstLetter(str)); //     My     first    name

      /**
       * 去掉字符串中所有的空格
       * @param str 字符串
       * @returns {*}
       */
      function removeSpace(str) {
        // \s  匹配任意空白字符(空格、制表符、换行符等)
        // return str.replace(/\s/g, "");
        return str.replace(/\s+/g, "");
      }
      // console.log(removeSpace(str)); // MYfIrSTnaME

      function curryingString(number, str) {
        return str.substr(0, number)
      }

      var str = "    MY     fIrST    naME";
      /* str = everyFirstLetterUpper(str);
      str = firstLetterLower(str);
      str = otherLetterLowerExceptFirstLetter(str);
      str = removeSpace(str);
      console.log(str); // myFirstName */

      // var smallCamelFn = myPlugin.pipe(everyFirstLetterUpper, firstLetterLower, otherLetterLowerExceptFirstLetter);
      var smallCamelFn = myPlugin.pipe(everyFirstLetterUpper, firstLetterLower, otherLetterLowerExceptFirstLetter, removeSpace, myPlugin.currying(curryingString, 10));
      console.log(smallCamelFn(str));
      console.log(smallCamelFn("  asdfasf  sdfasf   ggggggg  hGDGF"));
    </script>
  </body>
</html>